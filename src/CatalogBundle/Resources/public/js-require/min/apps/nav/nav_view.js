define(["app","tpl!apps/nav/templates/nav_template.tpl","tpl!apps/nav/templates/nav_element_template.tpl"],function(e,t,n){e.module("NavApp",function(e,i,l,o,s,a){e.NavElement=o.ItemView.extend({tagName:"li",template:n,events:{"click a":"navElect"},navElect:function(e){e.preventDefault(),this.trigger("page:elect",this.model),"mobile"===i.Observer.Window.getStatus()&&this.trigger("menu:close")}}),e.NavElements=o.CompositeView.extend({template:t,tagName:"nav",childView:e.NavElement,childViewContainer:"ul",events:{"click .menu-top__button":"clickMenuButton"},initialize:function(){this.listenTo(i.Observer.Window,"window:desktop",this.setDesktopFunctions),this.listenTo(i.Observer.Window,"window:mobile",this.setMobileFunctions),this.on("childview:menu:close",this.toggleMenu)},setDesktopFunctions:function(){this.clearMenu()},toggleMenu:function(){this.$el.find(".menu-top__button").toggleClass("active"),this.$el.find(".menu-top").slideToggle()},clickMenuButton:function(e){e.preventDefault(),this.toggleMenu()},clearMenu:function(){this.$el.find(".menu-top").removeAttr("style")},setMobileFunctions:function(){}})})});